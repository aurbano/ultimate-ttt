{"version":3,"sources":["../../src/model/TicTacToe.js"],"names":["TicTacToe","size","init","maxMoves","Math","pow","board","moves","winner","x","y","isFull","player","move","boardFinished","isValidPlayer","isValidMove","isPlayedMove","repeat","checkRow","checkColumn","checkLtRDiagonal","checkRtLDiagonal","isFinished","Number","isInteger","Array","isArray","length","row","i","col","ret","line","push","join"],"mappings":"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","file":"TicTacToe.js","sourcesContent":["import errors from './errors';\nimport error from '../error';\n\n/**\n * TicTacToe board implementation\n * Players must be indicated with 1 or 2\n * Moves with an array of [x, y]\n */\nexport default class TicTacToe {\n  constructor(size = 3){\n    this.size = size;\n    this.init();\n\n    this.maxMoves = Math.pow(this.size, 2);\n\n    return this;\n  }\n\n  init(){\n    this.board = [];\n    this.moves = 0;\n    this.winner = -1;\n\n    for(let x = 0; x < this.size; x++){\n      this.board[x] = [];\n      for(let y = 0; y < this.size; y++){\n        this.board[x][y] = 0;\n      }\n    }\n  }\n\n  isFull(){\n    return this.moves === this.maxMoves;\n  }\n\n  /**\n   * Returns true if the game is over\n   */\n  isFinished(){\n    return (this.winner > -1 || this.isFull());\n  }\n\n  /**\n   * Execute a move\n   * @param player Player identifier (1 || 2)\n   * @param move Move coordinates as an array [x, y]\n   */\n  move(player, move){\n    if(this.isFull()) {\n      throw error(errors.boardFinished);\n    }\n\n    if (!this.isValidPlayer(player)) {\n      throw error(errors.player, player);\n    }\n\n    if (!this.isValidMove(move)) {\n      throw error(errors.move, move);\n    }\n\n    if (this.isPlayedMove(move)) {\n      throw error(errors.repeat, move);\n    }\n\n    this.board[move[0]][move[1]] = player;\n    this.moves++;\n\n    this.checkRow(move[0]);\n    this.checkColumn(move[1]);\n\n    this.checkLtRDiagonal();\n    this.checkRtLDiagonal();\n\n    if (this.isFinished() && this.winner < 0){\n      this.winner = 0;\n    }\n  }\n\n  /**\n   * Validates a player\n   * @param player Player identifier (1 || 2)\n   * @returns {boolean}\n   */\n  isValidPlayer(player){\n    return !(!player || !Number.isInteger(player) || player < 1 || player > 2);\n  }\n\n  isPlayedMove(move){\n    return this.board[move[0]][move[1]] > 0;\n  }\n\n  /**\n   * Validates a move\n   * @param move Move coordinates as an array [x, y]\n   * @returns {boolean}\n   */\n  isValidMove(move){\n    return !(\n      !Array.isArray(move) ||\n      move.length !== 2 ||\n      move[0] < 0 ||\n      move[0] > this.size ||\n      move[1] < 0 ||\n      move[1] > this.size ||\n      typeof(this.board[move[0]][move[1]]) === 'undefined'\n    );\n  }\n\n  checkRow(row){\n    const player = this.board[row][0];\n    if(player === 0){\n      return;\n    }\n    for(let i = 1; i < this.size; i++){\n      if(player !== this.board[row][i]) {\n        return;\n      }\n    }\n    this.winner = player;\n  }\n\n  checkColumn(col){\n    const player = this.board[0][col];\n    if(player === 0){\n      return;\n    }\n    for(let i = 1; i < this.size; i++){\n      if(player !== this.board[i][col]) {\n        return;\n      }\n    }\n    this.winner = player;\n  }\n\n  checkLtRDiagonal(){\n    const player = this.board[0][0];\n    if(player === 0){\n      return;\n    }\n    for(let i = 1; i < this.size; i++){\n      if(player !== this.board[i][i]){\n        return;\n      }\n    }\n    this.winner = player;\n  }\n\n  checkRtLDiagonal(){\n    const player = this.board[0][this.size - 1];\n    if(player === 0){\n      return;\n    }\n    for(let i = this.size - 1; i >= 0; i--){\n      if(player !== this.board[this.size - 1 - i][i]){\n        return;\n      }\n    }\n    this.winner = player;\n  }\n\n  prettyPrint(){\n    let ret = [];\n    for(let x = 0; x < this.size; x++) {\n      let line = '';\n      for (let y = 0; y < this.size; y++) {\n        line += this.board[x][y] + ' ';\n      }\n      ret.push(line);\n    }\n    return ret.join(\"\\n\");\n  }\n}"]}